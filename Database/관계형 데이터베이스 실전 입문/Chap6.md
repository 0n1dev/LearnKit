# 도메인 설계 전략
## 도메인
### 도메인이란?

> 속성이 취할 수 있는 값의 집합

- 도메인의 요소에 어떤 구조를 가진 데이터를 할당할 것인지는 관계형 모델상의 제한이 없음
- 제한이 없지만 명확한 값을 가진 것에 한함 (NULL이나 포인터는 집합의 요소로 사용이 불가능)

## 도메인 설계 전략의 개요

### 모든 것은 자의적인 선택

- 각 속성에 어떤 값이 적합한지 생각하는 것은 **설계자의 업무**

### 응용프로그램의 필요성으로 생겨남

- 속성이 어떤 값을 얻을 수 있는지 결정하는 것은 **응용프로그램**
- 필요한 데이터가 어떤 것인지 목표를 모른다면 도메인 설계가 불가능
- 응용프로그램이 무엇을 수행하고 어떤 데이터가 입출력되며 이를 위해서 어떤 데이터를 영속화해야 하는지 찾아내야 됨

#### 적절한 DB 설계를 위해 필요한 것

- DB 설계는 응용프로그램에 관한 이해 없이 할 수 없음
- DB 설계는 DBA나 고급 공정의 개발자가 담당해야 할 일 (적어도 개발자가 설계에 관여할 수 있는 권한과 체제가 필요)

#### 도메인 주도 설계

- 관계형 모델 도메인과 관계 X
- "응용프로그램의 본질이 무엇인가?" 에 대한 설계 방법
- 응용프로그램에 어떤 데이터나 로직이 필요한가를 알아내는 것은 DB에 어떤 릴레이션이나 속성이 필요하냐와 직결

#### DB의 리팩터링

- 리팩터링으로 응용프로그램의 구조적 변화가 있을 때 DB 설계도 그에 맞게 리팩터링 필요

### 데이터의 본질을 파악

#### 숫자 값에 문자열 컬럼을 할당하는 실수에 관한 예

- 잘못된 설계 예
    - 학번 : 8자리 숫자로 구성
    - VARCHAR(8)로 구성 (적합하지 않음)

#### DB는 본질적인 데이터를 처리하게 한다

- 도메인 설계시 자릿수와 같은 표시상의 문제나 사용자의 편리성 등 본질적인 데이터를 확실하게 구별

### 속성(칼럼)의 이름

- 데이터 본질을 표현하는 이름을 사용
- 본문을 나타내는 속성명
- 응용프로그램에서 사용되는 클래스명이나 변수명과 같은 이름을 사용하는게 좋음

## ID를 설계한다는 개념

> ID는 현실 세계의 물체나 개념

- **물체나 개념을 집합으로 표현**하는 것이 관계형 모델의 기본 개념
- 현실 세계의 물건과 속성이 1:1로 관계 (정확하게 1:1로 일치하는 관계가 되지 않으면 ID로 기능 X)
- ID를 설계하는 경우는 그것이 개체에 대한 것인지 집단에 대한 것인지, 집단이라면 어떤 크기로 집합을 식별화할지 등을 고려
- 의제영역이 한정된 경우라면 세상에서 유일성을 갖지 않는 꼬리표라도 ID로 기능할 수 있다.

### 자연키와 대체키

- 자연키 : 이미 세상에 존재하는 어떤 단어나 꼬리표를 키로 사용
- 대체키 : 이 세계에는 없는 DB 또는 응용프로그램 내부에서만 통용되는 ID

